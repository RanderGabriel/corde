2021-02-01T22:53:29.8683651Z ##[group]Run yarn e2e
2021-02-01T22:53:29.8684224Z [36;1myarn e2e[0m
2021-02-01T22:53:29.8722855Z shell: /usr/bin/bash -e {0}
2021-02-01T22:53:29.8723310Z env:
2021-02-01T22:53:29.8724275Z   BOT_PREFIX: ***
2021-02-01T22:53:29.8725706Z   CORDE_TEST_TOKEN: ***
2021-02-01T22:53:29.8726178Z   BOT_TEST_ID: ***
2021-02-01T22:53:29.8726628Z   CHANNEL_ID: ***
2021-02-01T22:53:29.8727069Z   GUILD_ID: ***
2021-02-01T22:53:29.8728346Z   BOT_TEST_TOKEN: ***
2021-02-01T22:53:29.8728780Z   TIME_OUT: ***
2021-02-01T22:53:29.8729309Z ##[endgroup]
2021-02-01T22:53:30.2204408Z yarn run v1.22.10
2021-02-01T22:53:30.2942547Z $ jest ./e2e --config=./e2e/jest.config.ts --runInBand --detectOpenHandles
2021-02-01T22:53:47.7424035Z PASS e2e/toRenameRole/toRenameRole.case2.test.ts (12.474 s)
2021-02-01T22:53:57.3147422Z FAIL e2e/toSetRolePermission/toSetRolePermission.case1.test.ts (9.567 s)
2021-02-01T22:53:57.3163595Z   ‚óè testing toSetRolePermission ‚Ä∫ should set role permissions
2021-02-01T22:53:57.3176678Z 
2021-02-01T22:53:57.3177671Z     expect(received).toContain(expected) // indexOf
2021-02-01T22:53:57.3178272Z 
2021-02-01T22:53:57.3179446Z     Expected substring: "All tests passed***"
2021-02-01T22:53:57.3180214Z     Received string:    "
2021-02-01T22:53:57.3181971Z                    FAIL  command setRolePermission 773704805725634560 ADMINISTRATOR BAN_MEMBERS not returned what was expected¬∑
2021-02-01T22:53:57.3183128Z     All tests fail.
2021-02-01T22:53:57.3183707Z      FAILURES:  1
2021-02-01T22:53:57.3184218Z     "
2021-02-01T22:53:57.3184535Z 
2021-02-01T22:53:57.3185841Z        7 |     const command = Utils.buildCommandWithConfigPath("toSetRolePermission", "bot_case1.test.ts");
2021-02-01T22:53:57.3187346Z        8 |     const results = await cli.exec(command);
2021-02-01T22:53:57.3188403Z     >  9 |     expect(results.stdout).toContain(messages.ALL_TESTS_PASSED);
2021-02-01T22:53:57.3189549Z          |                            ^
2021-02-01T22:53:57.3190396Z       10 |     expect(results.stdout).toContain(messages.TOTAL + " 1");
2021-02-01T22:53:57.3191520Z       11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:53:57.3192274Z       12 |     done();
2021-02-01T22:53:57.3192625Z 
2021-02-01T22:53:57.3193877Z       at Object.<anonymous> (toSetRolePermission/toSetRolePermission.case1.test.ts:9:28)
2021-02-01T22:53:57.3194994Z 
2021-02-01T22:54:08.0466191Z PASS e2e/toSetRolePosition/toSetRolePosition.case1.test.ts (10.727 s)
2021-02-01T22:54:10.5516236Z PASS e2e/toRemoveReaction/toRemoveReaction.case1.test.ts
2021-02-01T22:54:20.9426736Z PASS e2e/toSetRoleMentionable/toSetRoleMentionable.case1.test.ts (10.385 s)
2021-02-01T22:54:31.5178305Z PASS e2e/toEditMessage/toEditMessage.case2.test.ts (10.569 s)
2021-02-01T22:54:31.5200092Z   ‚óè Console
2021-02-01T22:54:31.5200840Z 
2021-02-01T22:54:31.5206651Z     console.log
2021-02-01T22:54:31.5207446Z       
2021-02-01T22:54:31.5208042Z           test
2021-02-01T22:54:31.5209053Z                      FAIL  command editMessage 805934131279167568 newMessageEdited not returned what was expected
2021-02-01T22:54:31.5210129Z       
2021-02-01T22:54:31.5210756Z       All tests fail.
2021-02-01T22:54:31.5211415Z        FAILURES:  1
2021-02-01T22:54:31.5211930Z 
2021-02-01T22:54:31.5212725Z       at ChildProcess.<anonymous> (cliRunner.ts:70:19)
2021-02-01T22:54:31.5213382Z 
2021-02-01T22:54:31.5214020Z     console.log
2021-02-01T22:54:31.5215077Z       - login to corde bot
2021-02-01T22:54:31.5215995Z       ‚úî running tests
2021-02-01T22:54:31.5216549Z 
2021-02-01T22:54:31.5217342Z       at ChildProcess.<anonymous> (cliRunner.ts:71:19)
2021-02-01T22:54:31.5218004Z 
2021-02-01T22:54:41.4520737Z PASS e2e/toRemoveReaction/toRemoveReaction.case2.test.ts (9.926 s)
2021-02-01T22:54:50.5659815Z PASS e2e/toAddReaction/toAddReaction.case1.test.ts (9.108 s)
2021-02-01T22:55:01.7351528Z PASS e2e/toRenameRole/toRenameRole.case1.test.ts (11.163 s)
2021-02-01T22:55:11.9194312Z PASS e2e/toSetRoleMentionable/toSetRoleMentionable.case2.test.ts (10.178 s)
2021-02-01T22:55:21.9756893Z PASS e2e/toUnPinMessage/toUnPinMessage.case2.test.ts (10.051 s)
2021-02-01T22:55:32.1932303Z PASS e2e/toEditMessage/toEditMessage.case1.test.ts (10.213 s)
2021-02-01T22:55:32.1944288Z   ‚óè Console
2021-02-01T22:55:32.1944930Z 
2021-02-01T22:55:32.1945599Z     console.log
2021-02-01T22:55:32.1946256Z       
2021-02-01T22:55:32.1946850Z           test
2021-02-01T22:55:32.1947861Z                      PASS  command editMessage 805934385852710923 newMessageEdited returned what was expected
2021-02-01T22:55:32.1949159Z       
2021-02-01T22:55:32.1950256Z       All tests passed***
2021-02-01T22:55:32.1950941Z        TOTAL:  1
2021-02-01T22:55:32.1951447Z 
2021-02-01T22:55:32.1952251Z       at ChildProcess.<anonymous> (cliRunner.ts:70:19)
2021-02-01T22:55:32.1952923Z 
2021-02-01T22:55:32.1953568Z     console.log
2021-02-01T22:55:32.1954507Z       - login to corde bot
2021-02-01T22:55:32.1955405Z       ‚úî running tests
2021-02-01T22:55:32.1955966Z 
2021-02-01T22:55:32.1956764Z       at ChildProcess.<anonymous> (cliRunner.ts:71:19)
2021-02-01T22:55:32.1957739Z 
2021-02-01T22:55:46.1436210Z FAIL e2e/toAddReaction/toAddReaction.case2.test.ts (13.944 s)
2021-02-01T22:55:46.1438842Z   ‚óè testing toAddReaction function ‚Ä∫ tests should fail
2021-02-01T22:55:46.1439782Z 
2021-02-01T22:55:46.1440786Z     expect(received).toEqual(expected) // deep equality
2021-02-01T22:55:46.1441556Z 
2021-02-01T22:55:46.1442257Z     Expected: 0
2021-02-01T22:55:46.1443017Z     Received: 1
2021-02-01T22:55:46.1443573Z 
2021-02-01T22:55:46.1444561Z        9 |     expect(results.stdout).toContain(messages.ALL_TESTS_FAIL);
2021-02-01T22:55:46.1445916Z       10 |     expect(results.stdout).toContain(messages.FAILURES + " 1");
2021-02-01T22:55:46.1447161Z     > 11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:55:46.1448074Z          |                                ^
2021-02-01T22:55:46.1461396Z       12 |     done();
2021-02-01T22:55:46.1461918Z       13 |   });
2021-02-01T22:55:46.1462361Z       14 | });
2021-02-01T22:55:46.1462717Z 
2021-02-01T22:55:46.1463679Z       at Object.<anonymous> (toAddReaction/toAddReaction.case2.test.ts:11:32)
2021-02-01T22:55:46.1464472Z 
2021-02-01T22:55:48.4130786Z PASS e2e/toSetRoleColor/toSetRoleColor.case2.test.ts
2021-02-01T22:55:57.9510220Z PASS e2e/toSetRoleHoist/toSetRoleHoist.case2.test.ts (9.532 s)
2021-02-01T22:56:08.6563908Z PASS e2e/toSetRoleColor/toSetRoleColor.case1.test.ts (10.682 s)
2021-02-01T22:56:18.2655414Z FAIL e2e/toSetRoleHoist/toSetRoleHoist.case1.test.ts (9.604 s)
2021-02-01T22:56:18.2657875Z   ‚óè testing toSetRoleHoist ‚Ä∫ should change role color
2021-02-01T22:56:18.2658604Z 
2021-02-01T22:56:18.2659568Z     expect(received).toContain(expected) // indexOf
2021-02-01T22:56:18.2660227Z 
2021-02-01T22:56:18.2662714Z     Expected substring: "All tests passed***"
2021-02-01T22:56:18.2669709Z     Received string:    "
2021-02-01T22:56:18.2693908Z                    FAIL  command setRoleHoist 773704805725634560 not returned what was expected¬∑
2021-02-01T22:56:18.2694770Z     All tests fail.
2021-02-01T22:56:18.2695295Z      FAILURES:  1
2021-02-01T22:56:18.2695713Z     "
2021-02-01T22:56:18.2695972Z 
2021-02-01T22:56:18.2696953Z        7 |     const command = Utils.buildCommandWithConfigPath("toSetRoleHoist", "bot_case1.test.ts");
2021-02-01T22:56:18.2698101Z        8 |     const results = await cli.exec(command);
2021-02-01T22:56:18.2698958Z     >  9 |     expect(results.stdout).toContain(messages.ALL_TESTS_PASSED);
2021-02-01T22:56:18.2699668Z          |                            ^
2021-02-01T22:56:18.2700359Z       10 |     expect(results.stdout).toContain(messages.TOTAL + " 1");
2021-02-01T22:56:18.2701231Z       11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:56:18.2701829Z       12 |     done();
2021-02-01T22:56:18.2702113Z 
2021-02-01T22:56:18.2702959Z       at Object.<anonymous> (toSetRoleHoist/toSetRoleHoist.case1.test.ts:9:28)
2021-02-01T22:56:18.2703691Z 
2021-02-01T22:56:27.9590951Z PASS e2e/toReturn/toReturn.case1.test.ts (9.688 s)
2021-02-01T22:56:38.9990963Z PASS e2e/toPinMessage/toPinMessage.case2.test.ts (11.034 s)
2021-02-01T22:56:48.6479941Z PASS e2e/toSetRolePermission/toSetRolePermission.case2.test.ts (9.643 s)
2021-02-01T22:56:59.4010254Z PASS e2e/toUnPinMessage/toUnPinMessage.case1.test.ts (10.745 s)
2021-02-01T22:57:00.9028354Z PASS e2e/checkVersion/checkVersion.test.ts
2021-02-01T22:57:09.5299621Z PASS e2e/toSetRolePosition/toSetRolePosition.case2.test.ts (8.621 s)
2021-02-01T22:57:20.4312528Z PASS e2e/toDeleteRole/toDeleteRole.case1.test.ts (10.037 s)
2021-02-01T22:57:29.7959230Z FAIL e2e/toPinMessage/toPinMessage.case1.test.ts (10.22 s)
2021-02-01T22:57:29.7962092Z   ‚óè testing toPinMessage ‚Ä∫ should pin message
2021-02-01T22:57:29.7962657Z 
2021-02-01T22:57:29.7965345Z     expect(received).toContain(expected) // indexOf
2021-02-01T22:57:29.7966197Z 
2021-02-01T22:57:29.7967453Z     Expected substring: "All tests passed***"
2021-02-01T22:57:29.7968108Z     Received string:    "
2021-02-01T22:57:29.7968797Z         test
2021-02-01T22:57:29.7975162Z                    FAIL  command pin 805934878033707019 not returned what was expected¬∑
2021-02-01T22:57:29.7982649Z     All tests fail.
2021-02-01T22:57:29.7983360Z      FAILURES:  1
2021-02-01T22:57:29.7983808Z     "
2021-02-01T22:57:29.7986442Z 
2021-02-01T22:57:29.7989320Z        7 |     const command = Utils.buildCommandWithConfigPath("toPinMessage", "bot_case1.test.ts");
2021-02-01T22:57:29.7990515Z        8 |     const results = await cli.exec(command);
2021-02-01T22:57:29.7991365Z     >  9 |     expect(results.stdout).toContain(messages.ALL_TESTS_PASSED);
2021-02-01T22:57:29.7992085Z          |                            ^
2021-02-01T22:57:29.7992867Z       10 |     expect(results.stdout).toContain(messages.TOTAL + " 1");
2021-02-01T22:57:29.7993676Z       11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:57:29.7994246Z       12 |     done();
2021-02-01T22:57:29.7994511Z 
2021-02-01T22:57:29.7995260Z       at Object.<anonymous> (toPinMessage/toPinMessage.case1.test.ts:9:28)
2021-02-01T22:57:29.7995932Z 
2021-02-01T22:57:39.7846181Z PASS e2e/toDeleteRole/toDeleteRole.case2.test.ts (9.982 s)
2021-02-01T22:57:48.7576257Z PASS e2e/afterAll/afterAll.case2.test.ts (8.967 s)
2021-02-01T22:57:58.7325970Z PASS e2e/beforeStart/beforeStart.case1.test.ts (9.97 s)
2021-02-01T22:58:09.1573000Z PASS e2e/toReturn/toReturn.case2.test.ts (10.42 s)
2021-02-01T22:58:19.0525932Z PASS e2e/beforeStart/beforeStart.case2.test.ts (9.89 s)
2021-02-01T22:58:29.1064248Z PASS e2e/afterEach/afterAll.case2.test.ts (10.049 s)
2021-02-01T22:58:39.2071201Z PASS e2e/beforeEach/beforeEach.case1.test.ts (10.095 s)
2021-02-01T22:58:49.2996139Z PASS e2e/beforeEach/beforeEach.case2.test.ts (10.087 s)
2021-02-01T22:58:59.4506022Z PASS e2e/afterEach/afterAll.case1.test.ts (10.146 s)
2021-02-01T22:59:09.5978269Z PASS e2e/afterAll/afterAll.case1.test.ts (10.141 s)
2021-02-01T22:59:19.8475825Z PASS e2e/sendMessage/sendMessage.case1.test.ts (10.244 s)
2021-02-01T22:59:19.8497146Z 
2021-02-01T22:59:19.8498074Z Summary of all failing tests
2021-02-01T22:59:19.8512064Z FAIL toSetRolePermission/toSetRolePermission.case1.test.ts (9.567 s)
2021-02-01T22:59:19.8547474Z   ‚óè testing toSetRolePermission ‚Ä∫ should set role permissions
2021-02-01T22:59:19.8548113Z 
2021-02-01T22:59:19.8548985Z     expect(received).toContain(expected) // indexOf
2021-02-01T22:59:19.8549438Z 
2021-02-01T22:59:19.8550328Z     Expected substring: "All tests passed***"
2021-02-01T22:59:19.8550908Z     Received string:    "
2021-02-01T22:59:19.8552098Z                    FAIL  command setRolePermission 773704805725634560 ADMINISTRATOR BAN_MEMBERS not returned what was expected¬∑
2021-02-01T22:59:19.8552949Z     All tests fail.
2021-02-01T22:59:19.8553394Z      FAILURES:  1
2021-02-01T22:59:19.8553784Z     "
2021-02-01T22:59:19.8554025Z 
2021-02-01T22:59:19.8554985Z        7 |     const command = Utils.buildCommandWithConfigPath("toSetRolePermission", "bot_case1.test.ts");
2021-02-01T22:59:19.8556096Z        8 |     const results = await cli.exec(command);
2021-02-01T22:59:19.8556890Z     >  9 |     expect(results.stdout).toContain(messages.ALL_TESTS_PASSED);
2021-02-01T22:59:19.8557865Z          |                            ^
2021-02-01T22:59:19.8558509Z       10 |     expect(results.stdout).toContain(messages.TOTAL + " 1");
2021-02-01T22:59:19.8559321Z       11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:59:19.8559892Z       12 |     done();
2021-02-01T22:59:19.8560158Z 
2021-02-01T22:59:19.8561081Z       at Object.<anonymous> (toSetRolePermission/toSetRolePermission.case1.test.ts:9:28)
2021-02-01T22:59:19.8561914Z 
2021-02-01T22:59:19.8562608Z FAIL toAddReaction/toAddReaction.case2.test.ts (13.944 s)
2021-02-01T22:59:19.8563710Z   ‚óè testing toAddReaction function ‚Ä∫ tests should fail
2021-02-01T22:59:19.8564162Z 
2021-02-01T22:59:19.8564813Z     expect(received).toEqual(expected) // deep equality
2021-02-01T22:59:19.8565271Z 
2021-02-01T22:59:19.8565658Z     Expected: 0
2021-02-01T22:59:19.8566097Z     Received: 1
2021-02-01T22:59:19.8566382Z 
2021-02-01T22:59:19.8567014Z        9 |     expect(results.stdout).toContain(messages.ALL_TESTS_FAIL);
2021-02-01T22:59:19.8568054Z       10 |     expect(results.stdout).toContain(messages.FAILURES + " 1");
2021-02-01T22:59:19.8571970Z     > 11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:59:19.8577423Z          |                                ^
2021-02-01T22:59:19.8578813Z       12 |     done();
2021-02-01T22:59:19.8589993Z       13 |   });
2021-02-01T22:59:19.8590416Z       14 | });
2021-02-01T22:59:19.8590684Z 
2021-02-01T22:59:19.8634546Z       at Object.<anonymous> (toAddReaction/toAddReaction.case2.test.ts:11:32)
2021-02-01T22:59:19.8635229Z 
2021-02-01T22:59:19.8635977Z FAIL toSetRoleHoist/toSetRoleHoist.case1.test.ts (9.604 s)
2021-02-01T22:59:19.8637368Z   ‚óè testing toSetRoleHoist ‚Ä∫ should change role color
2021-02-01T22:59:19.8637816Z 
2021-02-01T22:59:19.8638548Z     expect(received).toContain(expected) // indexOf
2021-02-01T22:59:19.8639022Z 
2021-02-01T22:59:19.8641986Z     Expected substring: "All tests passed***"
2021-02-01T22:59:19.8642698Z     Received string:    "
2021-02-01T22:59:19.8643814Z                    FAIL  command setRoleHoist 773704805725634560 not returned what was expected¬∑
2021-02-01T22:59:19.8644533Z     All tests fail.
2021-02-01T22:59:19.8644996Z      FAILURES:  1
2021-02-01T22:59:19.8645413Z     "
2021-02-01T22:59:19.8645672Z 
2021-02-01T22:59:19.8688937Z        7 |     const command = Utils.buildCommandWithConfigPath("toSetRoleHoist", "bot_case1.test.ts");
2021-02-01T22:59:19.8690210Z        8 |     const results = await cli.exec(command);
2021-02-01T22:59:19.8691072Z     >  9 |     expect(results.stdout).toContain(messages.ALL_TESTS_PASSED);
2021-02-01T22:59:19.8691838Z          |                            ^
2021-02-01T22:59:19.8692478Z       10 |     expect(results.stdout).toContain(messages.TOTAL + " 1");
2021-02-01T22:59:19.8693334Z       11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:59:19.8693905Z       12 |     done();
2021-02-01T22:59:19.8694172Z 
2021-02-01T22:59:19.8694980Z       at Object.<anonymous> (toSetRoleHoist/toSetRoleHoist.case1.test.ts:9:28)
2021-02-01T22:59:19.8695665Z 
2021-02-01T22:59:19.8696339Z FAIL toPinMessage/toPinMessage.case1.test.ts (10.22 s)
2021-02-01T22:59:19.8697780Z   ‚óè testing toPinMessage ‚Ä∫ should pin message
2021-02-01T22:59:19.8698236Z 
2021-02-01T22:59:19.8698811Z     expect(received).toContain(expected) // indexOf
2021-02-01T22:59:19.8699470Z 
2021-02-01T22:59:19.8700262Z     Expected substring: "All tests passed***"
2021-02-01T22:59:19.8700836Z     Received string:    "
2021-02-01T22:59:19.8701270Z         test
2021-02-01T22:59:19.8702087Z                    FAIL  command pin 805934878033707019 not returned what was expected¬∑
2021-02-01T22:59:19.8702700Z     All tests fail.
2021-02-01T22:59:19.8703132Z      FAILURES:  1
2021-02-01T22:59:19.8703519Z     "
2021-02-01T22:59:19.8703756Z 
2021-02-01T22:59:19.8704633Z        7 |     const command = Utils.buildCommandWithConfigPath("toPinMessage", "bot_case1.test.ts");
2021-02-01T22:59:19.8705692Z        8 |     const results = await cli.exec(command);
2021-02-01T22:59:19.8748438Z     >  9 |     expect(results.stdout).toContain(messages.ALL_TESTS_PASSED);
2021-02-01T22:59:19.8831434Z          |                            ^
2021-02-01T22:59:19.8832196Z       10 |     expect(results.stdout).toContain(messages.TOTAL + " 1");
2021-02-01T22:59:19.8833077Z       11 |     expect(results.statusCode).toEqual(0);
2021-02-01T22:59:19.8833689Z       12 |     done();
2021-02-01T22:59:19.8833974Z 
2021-02-01T22:59:19.8834789Z       at Object.<anonymous> (toPinMessage/toPinMessage.case1.test.ts:9:28)
2021-02-01T22:59:19.8835475Z 
2021-02-01T22:59:19.8835713Z 
2021-02-01T22:59:19.8836224Z Test Suites: 4 failed, 32 passed, 36 total
2021-02-01T22:59:19.8836855Z Tests:       4 failed, 33 passed, 37 total
2021-02-01T22:59:19.8837412Z Snapshots:   0 total
2021-02-01T22:59:19.8837880Z Time:        344.645 s
2021-02-01T22:59:19.8838412Z Ran all test suites matching /.\/e2e/i.
2021-02-01T22:59:19.9118774Z 
2021-02-01T22:59:19.9120444Z Jest has detected the following 1 open handle potentially keeping Jest from exiting:
2021-02-01T22:59:19.9121293Z 
2021-02-01T22:59:19.9122539Z   ‚óè  PROCESSWRAP
2021-02-01T22:59:19.9123097Z 
2021-02-01T22:59:19.9123912Z       24 |     args = ["-c", command];
2021-02-01T22:59:19.9124588Z       25 |   }
2021-02-01T22:59:19.9125332Z     > 26 |   return cp.spawn(file, args, options);
2021-02-01T22:59:19.9126069Z          |             ^
2021-02-01T22:59:19.9126656Z       27 | }
2021-02-01T22:59:19.9127229Z       28 | 
2021-02-01T22:59:19.9130911Z       29 | export class CliRunner {
2021-02-01T22:59:19.9131527Z 
2021-02-01T22:59:19.9132217Z       at _spawn (cliRunner.ts:26:13)
2021-02-01T22:59:19.9132979Z       at cliRunner.ts:45:21
2021-02-01T22:59:19.9133800Z       at CliRunner.exec (cliRunner.ts:40:12)
2021-02-01T22:59:19.9134966Z       at Object.<anonymous> (sendMessage/sendMessage.case1.test.ts:7:30)
2021-02-01T22:59:19.9135811Z 
2021-02-01T22:59:19.9405409Z error Command failed with exit code 1.
2021-02-01T22:59:19.9407012Z info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
2021-02-01T22:59:19.9523710Z ##[error]Process completed with exit code 1.
